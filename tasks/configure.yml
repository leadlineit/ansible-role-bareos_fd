---
- name: Configure bareos-fd director
  when: bareos_fd.director is defined
  template:
    src: director.conf.j2
    dest: /etc/bareos/bareos-fd.d/director/{{ item.name }}.conf
    mode: '0640'
    owner: bareos
    group: bareos
  with_items: "{{ bareos_fd.director }}"

- name: Configure bareos-fd clients
  when: bareos_fd.client is defined
  template:
    src: client.conf.j2
    dest: /etc/bareos/bareos-fd.d/client/{{ item.name }}.conf
    mode: '0640'
    owner: bareos
    group: bareos
  with_items: "{{ bareos_fd.client }}"

- name: Configure bareos-fd messages
  when: bareos_fd.messages is defined
  template:
    src: messages.conf.j2
    dest: /etc/bareos/bareos-fd.d/messages/{{ item.name }}.conf
    mode: '0640'
    owner: bareos
    group: bareos
  with_items: "{{ bareos_fd.messages }}"
